{
  "manifest": {
    "name": "calculator",
    "version": "1.0.0",
    "description": "Advanced calculator with support for various mathematical operations",
    "author": "Kitty Team",
    "license": "MIT",
    "main": "index.js"
  },
  "code": "/**\n * Calculator Plugin for Kitty\n * \n * Provides mathematical calculation capabilities.\n * WARNING: This uses eval() for simplicity - in production,\n * use a proper math expression parser like math.js\n */\n\nexport const tools = [\n  {\n    name: 'calculate',\n    description: 'Perform mathematical calculations. Supports basic arithmetic (+, -, *, /), exponents (**), modulo (%), and parentheses. Use this when users need to compute mathematical expressions.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        expression: {\n          type: 'string',\n          description: 'Mathematical expression to evaluate (e.g., \"2 + 2\", \"(10 * 5) / 2\", \"2 ** 8\")'\n        }\n      },\n      required: ['expression']\n    },\n    execute: async (params) => {\n      try {\n        // Validate input\n        if (!params.expression || typeof params.expression !== 'string') {\n          return 'Error: Expression is required and must be a string';\n        }\n\n        // Basic security: only allow numbers, operators, and parentheses\n        const allowedChars = /^[0-9+\\-*/.()\\s%]+$/;\n        if (!allowedChars.test(params.expression)) {\n          return 'Error: Expression contains invalid characters. Only numbers and operators (+, -, *, /, %, **, .) are allowed.';\n        }\n\n        // Evaluate the expression\n        // NOTE: In production, use a proper math parser library\n        const result = eval(params.expression);\n        \n        // Check for invalid results\n        if (result === Infinity) {\n          return 'Error: Result is infinity (division by zero?)';\n        }\n        if (isNaN(result)) {\n          return 'Error: Result is not a number. Check your expression.';\n        }\n        \n        return `${params.expression} = ${result}`;\n      } catch (error) {\n        return `Error evaluating expression: ${error.message}`;\n      }\n    }\n  },\n  {\n    name: 'convert_units',\n    description: 'Convert between common units (temperature, distance, weight). Use when users need unit conversions.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        value: {\n          type: 'number',\n          description: 'The value to convert'\n        },\n        from_unit: {\n          type: 'string',\n          description: 'Source unit',\n          enum: ['celsius', 'fahrenheit', 'kelvin', 'meters', 'feet', 'miles', 'kilometers', 'kg', 'lbs']\n        },\n        to_unit: {\n          type: 'string',\n          description: 'Target unit',\n          enum: ['celsius', 'fahrenheit', 'kelvin', 'meters', 'feet', 'miles', 'kilometers', 'kg', 'lbs']\n        }\n      },\n      required: ['value', 'from_unit', 'to_unit']\n    },\n    execute: async (params) => {\n      try {\n        const { value, from_unit, to_unit } = params;\n        \n        // Temperature conversions\n        if (from_unit === 'celsius' && to_unit === 'fahrenheit') {\n          return `${value}°C = ${(value * 9/5 + 32).toFixed(2)}°F`;\n        }\n        if (from_unit === 'fahrenheit' && to_unit === 'celsius') {\n          return `${value}°F = ${((value - 32) * 5/9).toFixed(2)}°C`;\n        }\n        if (from_unit === 'celsius' && to_unit === 'kelvin') {\n          return `${value}°C = ${(value + 273.15).toFixed(2)}K`;\n        }\n        if (from_unit === 'kelvin' && to_unit === 'celsius') {\n          return `${value}K = ${(value - 273.15).toFixed(2)}°C`;\n        }\n        \n        // Distance conversions\n        if (from_unit === 'meters' && to_unit === 'feet') {\n          return `${value}m = ${(value * 3.28084).toFixed(2)}ft`;\n        }\n        if (from_unit === 'feet' && to_unit === 'meters') {\n          return `${value}ft = ${(value / 3.28084).toFixed(2)}m`;\n        }\n        if (from_unit === 'kilometers' && to_unit === 'miles') {\n          return `${value}km = ${(value * 0.621371).toFixed(2)}mi`;\n        }\n        if (from_unit === 'miles' && to_unit === 'kilometers') {\n          return `${value}mi = ${(value / 0.621371).toFixed(2)}km`;\n        }\n        \n        // Weight conversions\n        if (from_unit === 'kg' && to_unit === 'lbs') {\n          return `${value}kg = ${(value * 2.20462).toFixed(2)}lbs`;\n        }\n        if (from_unit === 'lbs' && to_unit === 'kg') {\n          return `${value}lbs = ${(value / 2.20462).toFixed(2)}kg`;\n        }\n        \n        return `Error: Cannot convert from ${from_unit} to ${to_unit}`;\n      } catch (error) {\n        return `Error converting units: ${error.message}`;\n      }\n    }\n  }\n];"
}
